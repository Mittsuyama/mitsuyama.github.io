
<!doctype html>
<html lang = "en">
    <head>
        <!-- Required meta tags -->
        <meta charset = "utf-8">
        <meta name = "viewport" content = "width = device-width, initial-scale = 1, shrink-to-fit = no">

        <!-- Bootstrap CSS -->
        <!-- <link rel = "stylesheet" href = "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity = "sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin = "anonymous"> -->
        <link rel = "stylesheet" href = "../css/home.css">
        <link rel = "stylesheet" href = "../css/blog.css">
        <link rel = "stylesheet" href = "../css/index.css">
        <link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,500" rel="stylesheet">
        <!-- <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"> -->

        <link rel = "icon" href = "../img/icon/favicon.ico" mce_href = "../img/icon/favicon.ico" type = "image/x-icon">
        <link rel = "shortcut icon" href = "../img/icon/favicon.ico" mce_href = "../img/icon/favicon.ico" type = "image/x-icon">
        
        <link rel = "stylesheet" type = "text/css" href = "../css/search.css">
        
        <link rel = "stylesheet" href = "../highlight/styles/atom-one-dark.css">
        
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

        <link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
        <script src = "../highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <!-- <script type="text/javascript" src="http://cdn.webfont.youziku.com/wwwroot/js/wf/youziku.api.min.js"></script>
        <script type="text/javascript">
            $youziku.load("body", "df2ce07dd7614d349931ab631ba1402e", "Source-Han-Light");
            $youziku.load(".normal", "df2ce07dd7614d349931ab631ba1402e", "Source-Han-Light");
            /*．．．*/
            $youziku.draw();
        </script> -->

        <title>日语单词复习程序</title>
    </head>
    
    <body>
        <div class = "nevigation">
                <div class = "nevigation_content1">
                    <a href = "http://mitsuyama.top">
                    <div class = "nav_text_home">
                        MITSUYAMA
                    </div>
                    </a>        
                </div>
                <div class = "navigation_content2">
                    <div class = "nav_text" id = "searchButton">
                        <i class = "fa fa-search"></i>
                    </div>
                    <a href = "blog/about.html">
                        <div class = "nav_text">
                            ABOUT
                        </div>
                    </a>
                    <div class = "nav_text">
                        BLOG    
                    </div>
                    <a href = "https://github.com/Mittsuyama">
                        <div class = "nav_text">
                            GITHUB
                        </div>
                    </a>
                </div>
            </div>
            
        <div class = "imgBack"></div>
        <div class = "container-fluid" id = "blogBackground">
            <img src = "../img/blog-image/31.jpg" class = "blogTitleImg">
            <div class = "glass"></div>
            <div class = "blogTitle">
                    日语单词复习程序
            </div>
            <div class = "tagContainer">
                &nbspJapanese | Computer | Python | GitHub&nbsp&nbsp|&nbsp&nbsp&nbsp肆月 29，2019
            </div>
        </div>
        
        <div class = "contentListOut">
            <div class = "contentList">
                <div class = "contentBorder">
                    <div class = "contentTitile">┌─ 目录 ───────</div>
                                <a href = "#1" class = "contentListCon" style = "color: rgba(0, 0, 0, 0.5); font-weight: bold;">寻找单词库</a>
            <a href = "#2" class = "contentListCon" style = "color: rgba(0, 0, 0, 0.5); font-weight: bold;">爬数据</a>
            <a href = "#3" class = "contentListCon" style = "color: rgba(0, 0, 0, 0.5); font-weight: bold;">软件制作</a>

                </div>
            </div>
        </div>
        
        <div class = "blogMainBlock">
            <div class = "articleContext">
                    <div class = "funButtonBox">
                        <div class = "funButtonCir" id = "funUp">
                            <i class = "fa fa-arrow-up" aria-hidden = "true"></i>
                        </div>
                        <div class = "funButtonCir" id = "funCom">
                            <i class = "fa fa-comments" aria-hidden = "true"></i>
                        </div>
                        <div class = "funButtonCir" id = "funList">
                            <i class = "fa fa-list" aria-hidden = "true"></i>
                        </div>
                        <div class = "funButtonCir" id = "funShare">
                            <i class = "fa fa-share-alt" aria-hidden = "true"></i>
                        </div>
                        <div class = "funButtonCir" id = "funSearch">
                            <i class = "fa fa-search" aria-hidden = "true"></i>
                        </div>
                    </div>
                <div class = "articleBorder">
                                    <div class = "normal">造好的 Repo：<a href = "https://github.com/Mittsuyama/Japanese_words_learning" class = "conncetion"><i class="fa fa-paper-plane" aria-hidden="true" ></i>Japanese_words_learning</a></div>
                <div class = "normal">数据库是手动建的，clone 下来不能直接用，需要手动 <span class = "emphasis">CREATE TABLE words</span>，详情看后文。</div>
                <div class = "normal">先来个最终效果图：</div>
                <img src = "../img/image-20190329135618187.png" class = "blogImg"><br>
                <div class = "h2" id = "1">寻找单词库</div>
                <div class = "normal">第一步，是要找到一个单词库，N1 - N5 一共接近两万个单词总不能一个一个打上去，其实主要是在这一步耽误了很久。（想找一个能分 JLPT 等级的词典）</div>
                <div class = "normal">直到有一天发现了一个 Chrome 插件：<a href = "https://chrome.google.com/webstore/detail/%E8%A8%80%E8%91%89-%E3%81%AE-tab/lacmiiahoideajihiclkhmdkikkbjcnb" class = "conncetion"><i class="fa fa-paper-plane" aria-hidden="true" ></i>言葉 の Tab</a></div>
                <div class = "quote"><i class = "fa fa-quote-left fa-1x fa-pull-left" aria-hidden = "true" id = "quoteIcon"></i>概述：A minimal Chrome / Firefox extension to help you learn Japanese words in each new tab.</div>
                <div class = "normal">可以在 Chrome 新建 Tab 显示日语单词，敲空格显示下一个，右上角四个选项分别是 JLPT 级数、收藏此单词、查看收藏、皮肤</div>
                <img src = "../img/kotoba.jpg" class = "blogImg"><br>
                <div class = "normal">其实用这个就可以了，但是我希望它能实现选择不同类型词汇、显示更多单词信息（比如同音词，近义词，其他形式等）、能够记录是否记住次单词，并且更高概率显示没有记住的单词等等功能。（要求有点多）</div>
                <div class = "normal">点击单词就能查看详细信息，然后就找到了非常贴合要求的电子词典：<a href = "https://jisho.org/" class = "conncetion"><i class="fa fa-paper-plane" aria-hidden="true" ></i>jisho.org</a></div>
                <div class = "normal">这个网站中能通过 JLPT 等级搜词，比如搜索 <span class = "emphasis">#jlpt-n3 #adjective</span>，一页能显示 20 个单词，有单词的基本信息（平假注音、词性、基本隐私、其他形式），一次 Request 能爬 20 个单词，效率还是比较高的（两万个单词也还是要爬一会）</div>
                <div class = "h2" id = "2">爬数据</div>
                <div class = "normal">需要准备：BeautifulSoup 库、pyMySQL 库、MySQL。<a href = "https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html" class = "conncetion"><i class="fa fa-paper-plane" aria-hidden="true" ></i>Beautiful Soup 4.2.0 文档</a></div>
                <div class = "normal">熬一锅 Soup 然后爬数据。这个网站的 Request 也比较简单。</div>
                <div class = "normal" style = "margin: 5px 0px 10px 0px; padding-left: 26px; text-indent: -25px;"><span class = "myList" style = "color: #333">1.</span><span class = "emphasis">https://jisho.org/search/%23jlpt-n3%20%23words?page=2</span> 修改网址中的 JLPT 等级和页码就能获取页面。</div>
                <div class = "normal" style = "margin: -12px 0px 10px 0px; padding-left: 26px; text-indent: -25px;"><span class = "myList" style = "color: #333">2.</span>查看此页面是否有 <span class = "emphasis">&lt;div class = "more"&gt;&lt;/div&gt;</span> 来判断是否达到最后一页。</div>
                <div class = "normal" style = "margin: -12px 0px 10px 0px; padding-left: 26px; text-indent: -25px;"><span class = "myList" style = "color: #333">3.</span>标签也算是比较规范，爬起来比较放心，有一个特例，搜索一下 <span class = "emphasis">可愛い</span> ，这个词的注音的标签就有点区别</div>
                <div class = "normal">建立数据库，新建 TABLE words</div>
                <pre><code class = "mysql">
CREATE TABLE words
(
    id int not null AUTO_INCREMENT,
  	kanji varchar(50) not null,
  	kana varchar(50) not null,
  	type tinytext not null,
  	meaning text not null,
  	grade int not null,
  	other text not null,
  	weight tinyint not null,
  	PRIMARY KEY (id),
  	CONSTRAINT kanji_kana UNIQUE (kanji, kana)
);
                </code></pre>
                <div class = "normal">注意日语里面有很多多音词，需要用联合 UNIQUE 判重（汉字和平假注音）。</div>
                <div class = "normal">意思有些单词很长，比如 <span class = "emphasis">掛ける</span> ，tinytext 可能不够。</div>
                <pre><code class = "python">
cursor.execute('''
    INSERT IGNORE INTO words(kanji, kana, type, grade, meaning, other)
    VALUES("%s", "%s", "%s", %d, "%s", "%s");
    '''%(kanji, kana, wType, grade, meaning, other))
connection.commit()
                </code></pre>
                <div class = "normal">然后就可以愉快的跟新数据库了，记得 <span class = "emphasis">INGORE</span> 去重。</div>
                <div class = "h2" id = "3">软件制作</div>
                <div class = "normal">需要大概实现这些功能：空格显示单词信息，再按空格表示认识，F 表示不熟或不认识，Q 退出程序（不认识的单词权重会增加，认识的会减少，权重更大的单词更容易出现）</div>
                <div class = "normal">为了做起来简单，选择 JLPT 等级和词性在终端中进行。</div>
                <img src = "../img/image-20190329140112371.png" class = "blogImg"><br>
                <img src = "../img/image-20190329140129239.png" class = "blogImg"><br>
                <div class = "normal">用 Python 的 input 读入，获取信息后，使用 TKinter 来做 UI 界面。</div>
                <img src = "../img/image-20190329135618187.png" class = "blogImg"><br>
                <div class = "normal">需要准备：TKinter。这个 GUI 库 Python 内置，不需要再去获取。</div>
                <div class = "normal">其中比较重要的几个点：</div>
                <div class = "h5">如何使权重大的单词更容易出现</div>
                <pre><code class = "python">
self.data = self.cursor.fetchall()
self.order = []
self.allNum = len(self.data)
for i in range(0, self.allNum):
    self.order.append(i)
  	self.order.sort(key = functools.cmp_to_key(self.myCmp))

def myCmp(self, x, y):
  	myRange = 0
  	if self.data[x][-1] > self.data[y][-1]:
    	myRange = 10
    else:
      myRange = 6
      result = random.randint(1, myRange)
    
    if result > 3:
        return -1;
    return 1;
                </code></pre>
                <div class = "normal">根据 JLPT 等级和词性获得的单词放在 data 数组中，order 是一个顺序数组（长度和 data 相同），用 <span class = "emphasis">fechall()</span>  得到的是个 <span class = "emphasis">tuple</span> 无法修改，所以修改 order 的顺序，来改变 data 的顺序（调用方式：<span class = "emphasis">data[order[i]]</span>）。</div>
                <br>
                <div class = "normal"><span class = "emphasis">myCmp</span> 是一个半随机的排序比较函数（单词的权重信息我放在最后一个位置，也就是 data[x][-1]）。这样能使权重大（也就是记得越不熟）的单词<span class = "strong">更容易</span>出现在前面，但是权重小的单词<span class = "strong">也可能</span>出现。</div>
                <div class = "h5">修改单词权重</div>
                <div class = "normal">在获取单词信息的时候，请把 ID（也就是 PRIMARY KEY 约束的表头）也一并获取。</div>
                <div class = "normal">然后根据唯一确定的 ID 来修改单词的权重</div>
                <pre><code class = "python">
def changeWeight(self, order, value):
    self.cursor.execute('''
      SELECT weight from words
      WHERE id = %d
      ''' % (order))
  	now = self.cursor.fetchall()[0][0]
  	now += value
  	now = max(0, min(100, now))
  	self.cursor.execute('''
  		UPDATE words
  		SET weight = %d
  		WHERE id = %d
  		''' % (now, order))
  	self.connection.commit()
                </code></pre>
                <div class = "normal">其他的逻辑和 UI 就是比较码农的东西，慢慢敲就行。</div>
                <br>
                <div class = "normal">程序的编写非常简单，没啥建议。</div>
                <div class = "normal">主要是建议不要用这种方法来背单词，而是当做检验工具，从零开始背单词效果非常差，过一眼根本记不住，背单词最好还是结合文章、歌曲、漫画、动漫、TV 剧等，印象会更深。</div>
                <div class = "normal">当你差不多记住某一个阶段的单词，用作复习的话，效果会非常好，用来检查哪些单词还不太熟。</div>

                </div>
                <div id = "disqus_thread"></div>  
                <!-- <div id = "container"></div>
                <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
                <script>
                var gitment = new Gitment({
                // id: '页面 ID', // 可选。默认为 location.href
                owner: 'Mitsuyama',
                repo: 'git@github.com:Mittsuyama/mittsuyama.github.io.git',
                oauth: {
                    client_id: '62e2f7957fce993ba7d6',
                    client_secret: 'adc6550219b7d1f1afdf9679e6dce6e599e7bba0',
                },
                })
                gitment.render('container')
                </script> -->
            </div>

            <div id = "foot">
                <div id = "footEmail">
                    Copyright © Mitsuyama | mitsuyama@163.com
                </div>
                <div id = "footTime">
                        UPDATED AT 2019/1/5
                </div>
            </div>
            
        <div id = "shareBigBox">
            <div class = "social-share" id = "shareBox"></div>
            <i class = "fa fa-times" aria-hidden = "true" id = "shareClose"></i>
        </div>

        <div id = "searchImg">
            <div class = "searchBox">
                <header>
                    <div id = "inputBox">
                        <input id = "my-search-input" placeholder = "SEARCH">
                        <i class = "fa fa-close" aria-hidden = "true" id = "searchIcon"></i>
                        <!-- We use a specific placeholder in the input to guides users in their search. -->
                    </div>
                </header>
                <main>
                    <div id = "hits"></div>
                    <div id = "pagination"></div>
                </main>
            </div>
        </div>

        <script type = "text/html" id = "hit-template">
            <div class = "hit" href = "{{url}}.html">
                <div class = "hit-content">
                    <div class = "hit-title">{{title}}</div>
                    <div class = "hit-tag">{{{_highlightResult.tag.value}}} &nbsp|&nbsp&nbsp {{{_highlightResult.time.value}}}</div>
                    <div class = "hit-brief">{{{_highlightResult.brief.value}}}</div>
                </div>
            </div>
        </script>
        
        <script>

            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

                    //加载 disqus
                var disqus_config = function () {
                    this.page.url = 'http://www.mitsuyama.top/blog/31.html';  // Replace PAGE_URL with your page's canonical URL variable
                    this.page.identifier = 'blog31'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                    };
                    
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

        <script src = "https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.js"></script>
        <script src = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
        <script src = "../js/blog.js"></script>

        <script src = "https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.js"></script>
        <script src = "../js/app.js"></script>
                
        <script src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
        <script type = "text/x-mathjax-config">
            MathJax.Hub.Config({
                tex2jax: {
                    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                    inlineMath: [['$','$']],
                    processEscapes: true
                }
            });
        </script>
    </body>
</html>